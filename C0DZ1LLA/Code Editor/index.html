<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Live Code Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/theme/material-darker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/addon/hint/show-hint.min.css">
    <style>
        body {
            display: flex;
            flex-direction: column;
            font-family: 'Arial', sans-serif;
            background-color: #282c34;
            color: white;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }
        header {
            background-color: #61dafb;
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
        }
        #toolbar {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            background-color: #20232a;
            padding: 10px;
            border-bottom: 1px solid #ccc;
        }
        button {
            background-color: #61dafb;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
            color: #20232a;
        }
        button:hover {
            background-color: #21a1f1;
        }
        #main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        #editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 150px);
        }
        .CodeMirror {
            flex: 1;
            font-size: 16px;
        }
        #modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        #modal-content {
            background-color: white;
            color: black;
            width: 80%;
            height: 80%;
            padding: 20px;
            border-radius: 10px;
        }
        #modal iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        @media (max-width: 768px) {
            #main-container {
                flex-direction: column;
            }
            #editor-container {
                height: 50%;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>Professional Live Code Editor</header>
    <div id="toolbar">
        <button onclick="insertTag('&lt;!DOCTYPE html&gt;', '')">Insert <!DOCTYPE html></button>
        <button onclick="insertTag('&lt;html&gt;', '&lt;/html&gt;')">Insert &lt;html&gt;</button>
        <button onclick="insertTag('&lt;head&gt;', '&lt;/head&gt;')">Insert &lt;head&gt;</button>
        <button onclick="insertTag('&lt;body&gt;', '&lt;/body&gt;')">Insert &lt;body&gt;</button>
        <button onclick="insertTag('&lt;h1&gt;', '&lt;/h1&gt;')">Insert &lt;h1&gt;</button>
        <button onclick="insertTag('&lt;p&gt;', '&lt;/p&gt;')">Insert &lt;p&gt;</button>
        <button onclick="insertTag('&lt;a href=&quot;&quot;&gt;', '&lt;/a&gt;')">Insert &lt;a&gt;</button>
        <button onclick="insertTag('&lt;div&gt;', '&lt;/div&gt;')">Insert &lt;div&gt;</button>
        <button onclick="insertTag('&lt;span&gt;', '&lt;/span&gt;')">Insert &lt;span&gt;</button>
        <button onclick="insertTag('&lt;script&gt;', '&lt;/script&gt;')">Insert &lt;script&gt;</button>
        <button onclick="insertTag('&lt;style&gt;', '&lt;/style&gt;')">Insert &lt;style&gt;</button>
        <button onclick="insertTag('&lt;img src=&quot;&quot; alt=&quot;&quot;&gt;', '')">Insert &lt;img&gt;</button>
        <button onclick="insertTag('&lt;table&gt;', '&lt;/table&gt;')">Insert &lt;table&gt;</button>
        <button onclick="insertTag('&lt;ul&gt;', '&lt;/ul&gt;')">Insert &lt;ul&gt;</button>
        <button onclick="insertTag('&lt;li&gt;', '&lt;/li&gt;')">Insert &lt;li&gt;</button>
        <button onclick="insertTag('&lt;form&gt;', '&lt;/form&gt;')">Insert &lt;form&gt;</button>
        <button onclick="insertTag('&lt;input type=&quot;text&quot; name=&quot;&quot;&gt;', '')">Insert &lt;input&gt;</button>
        <button onclick="insertTag('&lt;button&gt;', '&lt;/button&gt;')">Insert &lt;button&gt;</button>
        <button onclick="insertTag('&lt;textarea&gt;', '&lt;/textarea&gt;')">Insert &lt;textarea&gt;</button>
        <button onclick="insertTag('&lt;h2&gt;', '&lt;/h2&gt;')">Insert &lt;h2&gt;</button>
        <button onclick="insertTag('&lt;h3&gt;', '&lt;/h3&gt;')">Insert &lt;h3&gt;</button>
        <button onclick="insertTag('&lt;h4&gt;', '&lt;/h4&gt;')">Insert &lt;h4&gt;</button>
        <button onclick="insertTag('&lt;h5&gt;', '&lt;/h5&gt;')">Insert &lt;h5&gt;</button>
        <button onclick="insertTag('&lt;h6&gt;', '&lt;/h6&gt;')">Insert &lt;h6&gt;</button>
        <button onclick="insertTag('&lt;header&gt;', '&lt;/header&gt;')">Insert &lt;header&gt;</button>
        <button onclick="insertTag('&lt;footer&gt;', '&lt;/footer&gt;')">Insert &lt;footer&gt;</button>
        <button onclick="insertTag('&lt;nav&gt;', '&lt;/nav&gt;')">Insert &lt;nav&gt;</button>
        <button onclick="insertTag('&lt;section&gt;', '&lt;/section&gt;')">Insert &lt;section&gt;</button>
        <button onclick="insertTag('&lt;article&gt;', '&lt;/article&gt;')">Insert &lt;article&gt;</button>
        <button onclick="insertTag('&lt;aside&gt;', '&lt;/aside&gt;')">Insert &lt;aside&gt;</button>
        <button onclick="insertTag('&lt;figure&gt;', '&lt;/figure&gt;')">Insert &lt;figure&gt;</button>
        <button onclick="insertTag('&lt;figcaption&gt;', '&lt;/figcaption&gt;')">Insert &lt;figcaption&gt;</button>
        <button onclick="runCode()">Run</button>
        <button onclick="clearCode()">Clear</button>
    </div>
    <div id="main-container">
        <div id="editor-container">
            <textarea id="codeArea" placeholder="Write your HTML, CSS, and JS code here..."></textarea>
        </div>
    </div>
    <div id="modal">
        <div id="modal-content">
            <iframe id="preview"></iframe>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/addon/edit/closetag.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.1/addon/hint/html-hint.min.js"></script>
    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById('codeArea'), {
            lineNumbers: true,
            mode: 'htmlmixed',
            theme: 'material-darker',
            autoCloseTags: true,
            extraKeys: {"Ctrl-Space": "autocomplete"}
        });

        function runCode() {
            const code = editor.getValue();
            const previewFrame = document.getElementById('preview');
            const preview = previewFrame.contentDocument || previewFrame.contentWindow.document;
            preview.open();
            preview.write(code);
            preview.close();
            document.getElementById('modal').style.display = 'flex';
        }

        function clearCode() {
            editor.setValue('');
        }

        function insertTag(startTag, endTag) {
            startTag = decodeHTML(startTag);
            endTag = decodeHTML(endTag);
            const doc = editor.getDoc();
            const cursor = doc.getCursor();
            const selection = doc.getSelection();
            doc.replaceSelection(startTag + selection + endTag);
            doc.setCursor(cursor.line, cursor.ch + startTag.length);
            editor.focus();
        }

        function decodeHTML(html) {
            var txt = document.createElement('textarea');
            txt.innerHTML = html;
            return txt.value;
        }

        document.getElementById('modal').onclick = function() {
            document.getElementById('modal').style.display = 'none';
        }
    </script>
</body>
</html>
